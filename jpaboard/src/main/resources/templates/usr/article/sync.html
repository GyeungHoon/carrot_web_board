<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{usr/common/layout}">
<head>
    <title>동기화페이지</title>


<main class="main" layout:fragment="main">
    <article class="detail">
        <h2>동기화 정보</h2>
        <table class="detail__table" th:if="${crawling != null}">
            <!-- 크롤링 데이터 표시 -->

            <tr>
                <th>제목</th>
                <td>[[${crawling.title}]]</td>
            </tr>
            <tr>
                <th>내용</th>
                <td>[[${crawling.body}]]</td>
            </tr>
            <tr>
                <th>카테고리</th>
                <td>[[${crawling.category}]]</td>
            </tr>
            <tr>
                <th>작성자</th>
                <td>[[${crawling.author}]]</td>
            </tr>
            <tr>
                <th>위치</th>
                <td>[[${crawling.placeAddress}]]</td>
            </tr>
            <tr>
                <th>좋아요</th>
                <td>[[${crawling.like}]]</td>
            </tr>
            <tr>
                <th>조회수</th>
                <td>[[${crawling.views}]]</td>
            </tr>
            <tr>
                <th>등록시간</th>
                <td>[[${#temporals.format(crawling.regDate, 'yyyy-MM-dd HH:mm:ss')}]]</td>
            </tr>
            <tr>
                <th>업데이트시간</th>
                <td>[[${#temporals.format(crawling.updateDate, 'yyyy-MM-dd HH:mm:ss')}]]</td>
            </tr>
            <tr>
                <th>댓글</th>
                <td>
                    <div th:if="${crawledComments != null and !crawledComments.empty}">
                        <!-- 메인 댓글 반복 -->
                        <div th:each="comment : ${crawledComments}" class="comment-item" 
                             style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; background-color: #f8f9fa;">
                            
                            <!-- 댓글 작성자 정보 -->
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="width: 32px; height: 32px; border-radius: 50%; background-color: #e9ecef; margin-right: 10px;"></div>
                                <div>
                                    <div style="font-weight: bold; color: #333;" th:text="${comment.authorName}">작성자</div>
                                    <div style="font-size: 12px; color: #666;">위치 · 시간</div>
                                </div>
                            </div>
                            
                            <!-- 댓글 내용 -->
                            <div style="margin-bottom: 8px; color: #333;" th:text="${comment.content}">댓글 내용</div>
                            
                            <!-- 댓글 정보 (좋아요, 대댓글 수) -->
                            <div style="display: flex; gap: 15px; font-size: 12px; color: #666;">
                                <span>👍 <span th:text="${comment.likes}">좋아요 수</span></span>
                                <span>💬 <span th:text="${comment.replies != null ? comment.replies.size() : 0}">0</span></span>
                            </div>
                            
                            <!-- 대댓글 반복 -->
                            <div th:if="${comment.replies != null and !comment.replies.empty}">
                                <div th:each="reply : ${comment.replies}" class="reply-item"
                                     style="border: 1px solid #e9ecef; padding: 12px; margin: 5px 0 5px 30px; border-radius: 6px; background-color: white;">
                                    
                                    <!-- 대댓글 작성자 정보 -->
                                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                        <div style="width: 24px; height: 24px; border-radius: 50%; background-color: #f1f3f4; margin-right: 8px;"></div>
                                        <div>
                                            <div style="font-weight: bold; color: #555; font-size: 14px;" th:text="${reply.authorName}">대댓글 작성자</div>
                                            <div style="font-size: 11px; color: #888;">위치 · 시간</div>
                                        </div>
                                    </div>
                                    
                                    <!-- 대댓글 내용 -->
                                    <div style="color: #555; font-size: 14px;" th:text="${reply.content}">대댓글 내용</div>
                                    
                                    <!-- 대댓글 좋아요 -->
                                    <div style="margin-top: 5px; font-size: 11px; color: #888;">
                                        👍 <span th:text="${reply.likes}">좋아요 수</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${crawledComments == null or crawledComments.empty}">
                        <p style="color: #666; font-style: italic;">크롤링된 댓글이 없습니다.</p>
                    </div>
                </td>
            </tr>
            <tr>
                <th>동기화 상태</th>
                <td>[[${crawling.status}]]</td>
            </tr>
        </table>

    </article>
</main>

</html>