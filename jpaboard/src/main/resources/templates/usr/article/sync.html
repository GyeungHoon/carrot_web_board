<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{usr/common/layout}">
<head>
    <title>ë™ê¸°í™”í˜ì´ì§€</title>


<main class="main" layout:fragment="main">
    <article class="detail">
        <h2>ë™ê¸°í™” ì •ë³´</h2>
        <table class="detail__table" th:if="${crawling != null}">
            <!-- í¬ë¡¤ë§ ë°ì´í„° í‘œì‹œ -->

            <tr>
                <th>ì œëª©</th>
                <td>[[${crawling.title}]]</td>
            </tr>
            <tr>
                <th>ë‚´ìš©</th>
                <td>[[${crawling.body}]]</td>
            </tr>
            <tr>
                <th>ì¹´í…Œê³ ë¦¬</th>
                <td>[[${crawling.category}]]</td>
            </tr>
            <tr>
                <th>ì‘ì„±ì</th>
                <td>[[${crawling.author}]]</td>
            </tr>
            <tr>
                <th>ìœ„ì¹˜</th>
                <td>[[${crawling.placeAddress}]]</td>
            </tr>
            <tr>
                <th>ì¢‹ì•„ìš”</th>
                <td>[[${crawling.like}]]</td>
            </tr>
            <tr>
                <th>ì¡°íšŒìˆ˜</th>
                <td>[[${crawling.views}]]</td>
            </tr>
            <tr>
                <th>ë“±ë¡ì‹œê°„</th>
                <td>[[${#temporals.format(crawling.regDate, 'yyyy-MM-dd HH:mm:ss')}]]</td>
            </tr>
            <tr>
                <th>ì—…ë°ì´íŠ¸ì‹œê°„</th>
                <td>[[${#temporals.format(crawling.updateDate, 'yyyy-MM-dd HH:mm:ss')}]]</td>
            </tr>
            <tr>
                <th>ëŒ“ê¸€</th>
                <td>
                    <div th:if="${crawledComments != null and !crawledComments.empty}">
                        <!-- ë©”ì¸ ëŒ“ê¸€ ë°˜ë³µ -->
                        <div th:each="comment : ${crawledComments}" class="comment-item" 
                             style="border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; background-color: #f8f9fa;">
                            
                            <!-- ëŒ“ê¸€ ì‘ì„±ì ì •ë³´ -->
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <div style="width: 32px; height: 32px; border-radius: 50%; background-color: #e9ecef; margin-right: 10px;"></div>
                                <div>
                                    <div style="font-weight: bold; color: #333;" th:text="${comment.authorName}">ì‘ì„±ì</div>
                                    <div style="font-size: 12px; color: #666;">ìœ„ì¹˜ Â· ì‹œê°„</div>
                                </div>
                            </div>
                            
                            <!-- ëŒ“ê¸€ ë‚´ìš© -->
                            <div style="margin-bottom: 8px; color: #333;" th:text="${comment.content}">ëŒ“ê¸€ ë‚´ìš©</div>
                            
                            <!-- ëŒ“ê¸€ ì •ë³´ (ì¢‹ì•„ìš”, ëŒ€ëŒ“ê¸€ ìˆ˜) -->
                            <div style="display: flex; gap: 15px; font-size: 12px; color: #666;">
                                <span>ğŸ‘ <span th:text="${comment.likes}">ì¢‹ì•„ìš” ìˆ˜</span></span>
                                <span>ğŸ’¬ <span th:text="${comment.replies != null ? comment.replies.size() : 0}">0</span></span>
                            </div>
                            
                            <!-- ëŒ€ëŒ“ê¸€ ë°˜ë³µ -->
                            <div th:if="${comment.replies != null and !comment.replies.empty}">
                                <div th:each="reply : ${comment.replies}" class="reply-item"
                                     style="border: 1px solid #e9ecef; padding: 12px; margin: 5px 0 5px 30px; border-radius: 6px; background-color: white;">
                                    
                                    <!-- ëŒ€ëŒ“ê¸€ ì‘ì„±ì ì •ë³´ -->
                                    <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                        <div style="width: 24px; height: 24px; border-radius: 50%; background-color: #f1f3f4; margin-right: 8px;"></div>
                                        <div>
                                            <div style="font-weight: bold; color: #555; font-size: 14px;" th:text="${reply.authorName}">ëŒ€ëŒ“ê¸€ ì‘ì„±ì</div>
                                            <div style="font-size: 11px; color: #888;">ìœ„ì¹˜ Â· ì‹œê°„</div>
                                        </div>
                                    </div>
                                    
                                    <!-- ëŒ€ëŒ“ê¸€ ë‚´ìš© -->
                                    <div style="color: #555; font-size: 14px;" th:text="${reply.content}">ëŒ€ëŒ“ê¸€ ë‚´ìš©</div>
                                    
                                    <!-- ëŒ€ëŒ“ê¸€ ì¢‹ì•„ìš” -->
                                    <div style="margin-top: 5px; font-size: 11px; color: #888;">
                                        ğŸ‘ <span th:text="${reply.likes}">ì¢‹ì•„ìš” ìˆ˜</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${crawledComments == null or crawledComments.empty}">
                        <p style="color: #666; font-style: italic;">í¬ë¡¤ë§ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </td>
            </tr>
            <tr>
                <th>ë™ê¸°í™” ìƒíƒœ</th>
                <td>[[${crawling.status}]]</td>
            </tr>
        </table>

    </article>
</main>

</html>